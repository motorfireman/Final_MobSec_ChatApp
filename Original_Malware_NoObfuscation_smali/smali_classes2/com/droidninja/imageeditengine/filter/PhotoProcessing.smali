.class public Lcom/droidninja/imageeditengine/filter/PhotoProcessing;
.super Ljava/lang/Object;
.source "PhotoProcessing.java"


# static fields
.field private static final TAG:Ljava/lang/String; = "PhotoProcessing"


# direct methods
.method static constructor <clinit>()V
    .locals 1

    .line 87
    const-string v0, "photoprocessing"

    invoke-static {v0}, Ljava/lang/System;->loadLibrary(Ljava/lang/String;)V

    .line 88
    return-void
.end method

.method public constructor <init>()V
    .locals 0

    .line 24
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    return-void
.end method

.method public static combineImages(Landroid/graphics/Bitmap;Landroid/graphics/Bitmap;I)Landroid/graphics/Bitmap;
    .locals 4
    .param p0, "bmp1"    # Landroid/graphics/Bitmap;
    .param p1, "bmp2"    # Landroid/graphics/Bitmap;
    .param p2, "alpha"    # I

    .line 75
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getWidth()I

    move-result v0

    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getHeight()I

    move-result v1

    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getConfig()Landroid/graphics/Bitmap$Config;

    move-result-object v2

    invoke-static {v0, v1, v2}, Landroid/graphics/Bitmap;->createBitmap(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;

    move-result-object v0

    .line 76
    .local v0, "bmOverlay":Landroid/graphics/Bitmap;
    new-instance v1, Landroid/graphics/Canvas;

    invoke-direct {v1, v0}, Landroid/graphics/Canvas;-><init>(Landroid/graphics/Bitmap;)V

    .line 77
    .local v1, "canvas":Landroid/graphics/Canvas;
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {p1}, Landroid/graphics/Bitmap;->hasAlpha()Z

    move-result v3

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;

    move-result-object v2

    const-string v3, ""

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    move-result-object v2

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    const-string v3, "hasAlpha"

    invoke-static {v3, v2}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I

    .line 78
    new-instance v2, Landroid/graphics/Matrix;

    invoke-direct {v2}, Landroid/graphics/Matrix;-><init>()V

    const/4 v3, 0x0

    invoke-virtual {v1, p0, v2, v3}, Landroid/graphics/Canvas;->drawBitmap(Landroid/graphics/Bitmap;Landroid/graphics/Matrix;Landroid/graphics/Paint;)V

    .line 79
    new-instance v2, Landroid/graphics/Paint;

    invoke-direct {v2}, Landroid/graphics/Paint;-><init>()V

    .line 80
    .local v2, "alphaPaint":Landroid/graphics/Paint;
    invoke-virtual {v2, p2}, Landroid/graphics/Paint;->setAlpha(I)V

    .line 81
    const/4 v3, 0x0

    invoke-virtual {v1, p1, v3, v3, v2}, Landroid/graphics/Canvas;->drawBitmap(Landroid/graphics/Bitmap;FFLandroid/graphics/Paint;)V

    .line 82
    return-object v0
.end method

.method public static filterPhoto(Landroid/graphics/Bitmap;Lcom/droidninja/imageeditengine/model/ImageFilter;)Landroid/graphics/Bitmap;
    .locals 3
    .param p0, "bitmap"    # Landroid/graphics/Bitmap;
    .param p1, "filterConfig"    # Lcom/droidninja/imageeditengine/model/ImageFilter;

    .line 28
    if-eqz p0, :cond_0

    .line 29
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->sendBitmapToNative(Landroid/graphics/Bitmap;)V

    .line 31
    :cond_0
    iget-object v0, p1, Lcom/droidninja/imageeditengine/model/ImageFilter;->filterName:Ljava/lang/String;

    const/4 v1, -0x1

    invoke-virtual {v0}, Ljava/lang/String;->hashCode()I

    move-result v2

    sparse-switch v2, :sswitch_data_0

    :cond_1
    goto/16 :goto_0

    :sswitch_0
    const-string v2, "Georgia"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/16 v1, 0x9

    goto/16 :goto_0

    :sswitch_1
    const-string v2, "Instafix"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x1

    goto/16 :goto_0

    :sswitch_2
    const-string v2, "Testino"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x3

    goto :goto_0

    :sswitch_3
    const-string v2, "Sepia"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x7

    goto :goto_0

    :sswitch_4
    const-string v2, "Retro"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x5

    goto :goto_0

    :sswitch_5
    const-string v2, "Cyano"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/16 v1, 0x8

    goto :goto_0

    :sswitch_6
    const-string v2, "Ansel"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x2

    goto :goto_0

    :sswitch_7
    const-string v2, "XPro"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x4

    goto :goto_0

    :sswitch_8
    const-string v2, "None"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x0

    goto :goto_0

    :sswitch_9
    const-string v2, "HDR"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/16 v1, 0xb

    goto :goto_0

    :sswitch_a
    const-string v2, "B&W"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/4 v1, 0x6

    goto :goto_0

    :sswitch_b
    const-string v2, "Sahara"

    invoke-virtual {v0, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    if-eqz v0, :cond_1

    const/16 v1, 0xa

    :goto_0
    packed-switch v1, :pswitch_data_0

    goto :goto_1

    .line 65
    :pswitch_0
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyHDR()V

    goto :goto_1

    .line 62
    :pswitch_1
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplySahara()V

    .line 63
    goto :goto_1

    .line 59
    :pswitch_2
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyGeorgia()V

    .line 60
    goto :goto_1

    .line 56
    :pswitch_3
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyCyano()V

    .line 57
    goto :goto_1

    .line 53
    :pswitch_4
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplySepia()V

    .line 54
    goto :goto_1

    .line 50
    :pswitch_5
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyBW()V

    .line 51
    goto :goto_1

    .line 47
    :pswitch_6
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyRetro()V

    .line 48
    goto :goto_1

    .line 44
    :pswitch_7
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyXPro()V

    .line 45
    goto :goto_1

    .line 41
    :pswitch_8
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyTestino()V

    .line 42
    goto :goto_1

    .line 38
    :pswitch_9
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyAnsel()V

    .line 39
    goto :goto_1

    .line 35
    :pswitch_a
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeApplyInstafix()V

    .line 36
    goto :goto_1

    .line 33
    :pswitch_b
    nop

    .line 68
    :goto_1
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;

    move-result-object v0

    .line 69
    .local v0, "filteredBitmap":Landroid/graphics/Bitmap;
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeDeleteBitmap()V

    .line 71
    return-object v0

    nop

    :sswitch_data_0
    .sparse-switch
        -0x6cd61baa -> :sswitch_b
        0xfcb3 -> :sswitch_a
        0x116d6 -> :sswitch_9
        0x252358 -> :sswitch_8
        0x293b35 -> :sswitch_7
        0x3c7b4ed -> :sswitch_6
        0x3e8a18c -> :sswitch_5
        0x4b3327e -> :sswitch_4
        0x4c139d6 -> :sswitch_3
        0xe6fc9f8 -> :sswitch_2
        0x24f0db7a -> :sswitch_1
        0x5e8578be -> :sswitch_0
    .end sparse-switch

    :pswitch_data_0
    .packed-switch 0x0
        :pswitch_b
        :pswitch_a
        :pswitch_9
        :pswitch_8
        :pswitch_7
        :pswitch_6
        :pswitch_5
        :pswitch_4
        :pswitch_3
        :pswitch_2
        :pswitch_1
        :pswitch_0
    .end packed-switch
.end method

.method public static flipHorizontally(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;
    .locals 2
    .param p0, "bitmap"    # Landroid/graphics/Bitmap;

    .line 215
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getWidth()I

    move-result v0

    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getHeight()I

    move-result v1

    invoke-static {v0, v1}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeInitBitmap(II)I

    .line 216
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->sendBitmapToNative(Landroid/graphics/Bitmap;)V

    .line 217
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeFlipHorizontally()V

    .line 218
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 219
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeDeleteBitmap()V

    .line 220
    return-object p0
.end method

.method public static native freeBeautifyMatrix()V
.end method

.method private static getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;
    .locals 12
    .param p0, "bitmap"    # Landroid/graphics/Bitmap;

    .line 157
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeGetBitmapWidth()I

    move-result v8

    .line 158
    .local v8, "width":I
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeGetBitmapHeight()I

    move-result v9

    .line 160
    .local v9, "height":I
    if-eqz p0, :cond_0

    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getWidth()I

    move-result v0

    if-ne v8, v0, :cond_0

    .line 161
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getHeight()I

    move-result v0

    if-ne v9, v0, :cond_0

    invoke-virtual {p0}, Landroid/graphics/Bitmap;->isMutable()Z

    move-result v0

    if-nez v0, :cond_2

    .line 162
    :cond_0
    sget-object v0, Landroid/graphics/Bitmap$Config;->ARGB_8888:Landroid/graphics/Bitmap$Config;

    .line 163
    .local v0, "config":Landroid/graphics/Bitmap$Config;
    if-eqz p0, :cond_1

    .line 164
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getConfig()Landroid/graphics/Bitmap$Config;

    move-result-object v0

    .line 165
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->recycle()V

    .line 167
    :cond_1
    invoke-static {v8, v9, v0}, Landroid/graphics/Bitmap;->createBitmap(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 170
    .end local v0    # "config":Landroid/graphics/Bitmap$Config;
    :cond_2
    new-array v10, v8, [I

    .line 171
    .local v10, "pixels":[I
    const/4 v0, 0x0

    move v11, v0

    .local v11, "y":I
    :goto_0
    if-ge v11, v9, :cond_3

    .line 172
    invoke-static {v11, v10}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeGetBitmapRow(I[I)V

    .line 173
    const/4 v2, 0x0

    const/4 v4, 0x0

    const/4 v7, 0x1

    move-object v0, p0

    move-object v1, v10

    move v3, v8

    move v5, v11

    move v6, v8

    invoke-virtual/range {v0 .. v7}, Landroid/graphics/Bitmap;->setPixels([IIIIIII)V

    .line 171
    add-int/lit8 v11, v11, 0x1

    goto :goto_0

    .line 176
    .end local v11    # "y":I
    :cond_3
    return-object p0
.end method

.method public static native handleSmooth(Landroid/graphics/Bitmap;F)V
.end method

.method public static native handleSmoothAndWhiteSkin(Landroid/graphics/Bitmap;FF)V
.end method

.method public static native handleWhiteSkin(Landroid/graphics/Bitmap;F)V
.end method

.method public static makeBitmapMutable(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;
    .locals 1
    .param p0, "bitmap"    # Landroid/graphics/Bitmap;

    .line 180
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->sendBitmapToNative(Landroid/graphics/Bitmap;)V

    .line 181
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;

    move-result-object v0

    return-object v0
.end method

.method public static native nativeApplyAnsel()V
.end method

.method public static native nativeApplyBW()V
.end method

.method public static native nativeApplyCustomFilter(I)V
.end method

.method public static native nativeApplyCyano()V
.end method

.method public static native nativeApplyGeorgia()V
.end method

.method public static native nativeApplyHDR()V
.end method

.method public static native nativeApplyInstafix()V
.end method

.method public static native nativeApplyRetro()V
.end method

.method public static native nativeApplySahara()V
.end method

.method public static native nativeApplySepia()V
.end method

.method public static native nativeApplyTestino()V
.end method

.method public static native nativeApplyXPro()V
.end method

.method public static native nativeDeleteBitmap()V
.end method

.method public static native nativeFlipHorizontally()V
.end method

.method public static native nativeGetBitmapHeight()I
.end method

.method public static native nativeGetBitmapRow(I[I)V
.end method

.method public static native nativeGetBitmapWidth()I
.end method

.method public static native nativeInitBitmap(II)I
.end method

.method public static native nativeLoadResizedJpegBitmap([BII)V
.end method

.method public static native nativeResizeBitmap(II)V
.end method

.method public static native nativeRotate180()V
.end method

.method public static native nativeRotate90()I
.end method

.method public static native nativeSetBitmapRow(I[I)V
.end method

.method public static rotate(Landroid/graphics/Bitmap;I)Landroid/graphics/Bitmap;
    .locals 4
    .param p0, "bitmap"    # Landroid/graphics/Bitmap;
    .param p1, "angle"    # I

    .line 185
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getWidth()I

    move-result v0

    .line 186
    .local v0, "width":I
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getHeight()I

    move-result v1

    .line 187
    .local v1, "height":I
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getConfig()Landroid/graphics/Bitmap$Config;

    move-result-object v2

    .line 188
    .local v2, "config":Landroid/graphics/Bitmap$Config;
    invoke-static {v0, v1}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeInitBitmap(II)I

    .line 189
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->sendBitmapToNative(Landroid/graphics/Bitmap;)V

    .line 191
    const/16 v3, 0x5a

    if-ne p1, v3, :cond_0

    .line 192
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeRotate90()I

    .line 193
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->recycle()V

    .line 194
    invoke-static {v1, v0, v2}, Landroid/graphics/Bitmap;->createBitmap(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 195
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 196
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeDeleteBitmap()V

    goto :goto_0

    .line 197
    :cond_0
    const/16 v3, 0xb4

    if-ne p1, v3, :cond_1

    .line 198
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeRotate180()V

    .line 199
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->recycle()V

    .line 200
    invoke-static {v0, v1, v2}, Landroid/graphics/Bitmap;->createBitmap(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 201
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 202
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeDeleteBitmap()V

    goto :goto_0

    .line 203
    :cond_1
    const/16 v3, 0x10e

    if-ne p1, v3, :cond_2

    .line 204
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeRotate180()V

    .line 205
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeRotate90()I

    .line 206
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->recycle()V

    .line 207
    invoke-static {v1, v0, v2}, Landroid/graphics/Bitmap;->createBitmap(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 208
    invoke-static {p0}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->getBitmapFromNative(Landroid/graphics/Bitmap;)Landroid/graphics/Bitmap;

    move-result-object p0

    .line 209
    invoke-static {}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeDeleteBitmap()V

    .line 211
    :cond_2
    :goto_0
    return-object p0
.end method

.method private static sendBitmapToNative(Landroid/graphics/Bitmap;)V
    .locals 12
    .param p0, "bitmap"    # Landroid/graphics/Bitmap;

    .line 146
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getWidth()I

    move-result v8

    .line 147
    .local v8, "width":I
    invoke-virtual {p0}, Landroid/graphics/Bitmap;->getHeight()I

    move-result v9

    .line 148
    .local v9, "height":I
    invoke-static {v8, v9}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeInitBitmap(II)I

    .line 149
    new-array v10, v8, [I

    .line 150
    .local v10, "pixels":[I
    const/4 v0, 0x0

    move v11, v0

    .local v11, "y":I
    :goto_0
    if-ge v11, v9, :cond_0

    .line 151
    const/4 v2, 0x0

    const/4 v4, 0x0

    const/4 v7, 0x1

    move-object v0, p0

    move-object v1, v10

    move v3, v8

    move v5, v11

    move v6, v8

    invoke-virtual/range {v0 .. v7}, Landroid/graphics/Bitmap;->getPixels([IIIIIII)V

    .line 152
    invoke-static {v11, v10}, Lcom/droidninja/imageeditengine/filter/PhotoProcessing;->nativeSetBitmapRow(I[I)V

    .line 150
    add-int/lit8 v11, v11, 0x1

    goto :goto_0

    .line 154
    .end local v11    # "y":I
    :cond_0
    return-void
.end method
